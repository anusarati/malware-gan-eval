"""Changes order of directories"""

from pathlib import Path
import shutil
import argparse


def reorder(base):
    base = Path(base)
    dir1s = list(filter(Path.is_dir, base.iterdir()))
    for dir1 in dir1s:
        dir2s = list(filter(Path.is_dir, dir1.iterdir()))
        for dir2 in dir2s:
            upper: Path = base / dir2.name
            upper.mkdir(parents=True, exist_ok=True)
            shutil.move(dir2, upper / dir1.name)
        dir1.rmdir()


if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    parser.add_argument("-i", "--idir", type=str)
    args = parser.parse_args()
    reorder(args.idir)
