from pathlib import Path
from tqdm import tqdm
from tqdm.contrib.concurrent import thread_map
import os

paths = list(Path("statout/txt").iterdir())
print(len(paths))
assert Path('statout/txt/67ff48a0c3fa2acea6dd1ca1d1e71e49140fcab7dc2ec88516b9a250a3bc1596') in paths
outdir = Path("statout/embeds")
outpaths = thread_map(lambda p: outdir / (p.name + ".pt"), paths)
print(len(outpaths))
assert Path('statout/embeds/67ff48a0c3fa2acea6dd1ca1d1e71e49140fcab7dc2ec88516b9a250a3bc1596.pt') in paths
missing = thread_map(lambda p: not os.path.isfile(p), paths)

print(missing.count(1))

with open("rem.txt", "w") as f:
    for i, outpath in tqdm(enumerate(outpaths)):
        if missing[i]:
            print(str(outpath), file=f)
