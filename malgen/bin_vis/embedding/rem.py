from pathlib import Path
from tqdm import tqdm
from tqdm.contrib.concurrent import thread_map
import os

paths = list(Path("statout/txt").iterdir()) + ["foobar"]
outdir = Path("statout/embeds")
outpaths = thread_map(lambda p: outdir / (p.name + ".pt"), paths)
missing = thread_map(lambda p: not os.path.isfile(p), paths)

print(missing.count(0))
print(missing.count(1))

with open("rem.txt", "w") as f:
    for i, outpath in tqdm(enumerate(outpaths)):
        if missing[i]:
            print(str(outpath), file=f)
