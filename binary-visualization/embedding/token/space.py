"""Adds spaces in between tokens in a file"""

import youtokentome as yttm
import sys
from tqdm import tqdm

model_path = "tokenizer.model"
bpe = yttm.BPE(model=model_path)

with open(sys.argv[1], "r") as f:
    text = f.read()
    print("read")
    tokens = bpe.encode(
        [text],
        output_type=yttm.OutputType.SUBWORD,
    )
    assert len(tokens) == 1
    tokens = tokens[0]
    print(len(tokens))
    with open(sys.argv[2], "w") as out:
        for token in tqdm(tokens):
            print(token, file=out)
