from PIL import Image
from math import sqrt
import sys
from pathlib import Path

def visualize(file):
    """
    Returns image of the file,
    where each side length is the square root of
    the file size
    @param file - 
    """
    with open(file, 'rb', 0) as bytestream:
        bin = bytestream.readall()
        size = len(bin)
        side = int(sqrt(size))
        return Image.frombytes('L', (side, side), bin)
    
if __name__ == '__main__':
    for filepath in sys.argv[1:]:
        img = visualize(filepath)
        filename = Path(filepath).name
        print(img.size)
        img.save(filename + '.png')
        img.resize((128,128)).save(filename + '.128.png')
        img.resize((512,512)).save(filename + '.512.png')